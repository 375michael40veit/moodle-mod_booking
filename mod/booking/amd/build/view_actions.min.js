define(["jquery","mod_booking/jquery.barrating"],function(a){return{setup:function(b){a(".starrating").each(function(c,d){var e=a(this).data("current-rating"),f=a(this).data("itemid");d||(d="");var g=this;a(this).barrating({initialRating:e,theme:"css-stars",onSelect:function(c,d,e){"undefined"!=typeof e&&a.ajax({url:"/mod/booking/rating_rest.php?id="+b,method:"POST",data:{optionid:f,value:c}}).done(function(b){a(g).barrating("readonly",!0),a(g).barrating("set",b.rate)})}})}),a("#showHideSearch").on("click",function(){a("#tableSearch").fadeToggle("slow","linear"),a("html, body").animate({scrollTop:a("#tableSearch").offset().top-120},1e3)}),a(".showHideOptionText").on("click",function(){a("#optiontext"+a(this).data("id")).fadeToggle("slow","linear"),a("html, body").animate({scrollTop:a("#optiontext"+a(this).data("id")).offset().top-120},1e3)}),a("#page-mod-booking-view #buttonclear").on("click",function(){a("#searchtext, #searchlocation, #searchinstitution, #searchname, #searchsurname").val(""),a("#searchButton").trigger("click")}),a("#page-mod-booking-report #buttonclear").on("click",function(){a("#menusearchwaitinglist, #menusearchfinished, #searchdate").val(""),a("#searchButton").trigger("click")}),a("#page-mod-booking-report #usercheckboxall").click(function(){a("#studentsform input:checkbox").not(this).prop("checked",this.checked)}),a("#page-mod-booking-report #menuratingall").change(function(){a("#studentsform input:checkbox").not(this).prop("checked","checked");var b=a(this).val();a('.booking-option-rating .postratingmenu.ratinginput [value="'+b+'"]').attr("selected",!0)}),a("#page-mod-booking-report .booking-option-rating .ratinginput").change(function(){var b=a(this).attr("id"),c=b.replace(/\D/g,"");a("#studentsform [id=check"+c+"]").prop("checked","checked")})}}});